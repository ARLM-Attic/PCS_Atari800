 LST OFF
*
* ZAP(2) PCS DISK
*  FOR THE ATARI 800
*
PUTSCTR EQU $57
*
DUNIT EQU $301
DCOMND EQU $302
DSTATS EQU $303
DBUFR EQU $304
DSCTR EQU $30A
*
PIECE3 EQU $1B00 ;REALLY $7B00
DISKINV EQU $E453
*
 ORG $8F00
 OBJ $7000
*
 LDA #0
 STA DSCTR+1
 STA DBUFR
PUTPIECE3 LDA #>PIECE3
 LDX #$C0
 LDY #$70
*
PUTSECTORS STA DBUFR+1
 STX DSCTR
 STY SECTORCOUNT
*
 LDA #1
 STA DUNIT
 LDA #PUTSCTR
 STA DCOMND
 LDA #0
 STA DBUFR
 LDA #0
 STA DSCTR+1
*
GETS2 JSR DISKINV
 LDA DSTATS
 CMP #1
 BNE GETS2
*
 LDA DBUFR
 CLC
 ADC #128
 STA DBUFR
 LDA DBUFR+1
 ADC #0
 STA DBUFR+1
 INC DSCTR
 BNE GETS3
 INC DSCTR+1
GETS3 DEC SECTORCOUNT
 BNE GETS2
 RTS
*
SECTORCOUNT HEX 00
*
